(this["webpackJsonptocata-pedal"]=this["webpackJsonptocata-pedal"]||[]).push([[0],{113:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),o=n(13),i=n.n(o),s=n(14),l=n(8),u=n(21),j=n(162),b=n(161),d=n(159),f=n(183),p=n(182),O=n(164),m=n(160),h=n(115),x=n(157),g=n(158),v=n(88),y=n.n(v),w=n(163),C=n(33),k=n(154),N=n(18),S=n(65),P=n(16),A=240,E=Object(k.a)((function(e){return{root:{display:"flex"},drawer:Object(u.a)({},e.breakpoints.up("sm"),{width:A,flexShrink:0}),appBar:Object(u.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(A,"px)"),marginLeft:A}),menuButton:Object(u.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:A},content:{flexGrow:1,padding:e.spacing(3)}}}));function I(e){var t=e.icon,n=e.primary,r=e.to,o=e.index,i=e.onClick,s=c.a.useMemo((function(){return c.a.forwardRef((function(e,t){return Object(a.jsx)(S.b,Object(l.a)({to:r,ref:t},e))}))}),[r]);return Object(a.jsx)("li",{children:Object(a.jsxs)(h.a,{button:!0,component:s,onClick:i,children:[t?Object(a.jsx)(x.a,{children:t}):null,Object(a.jsx)(g.a,{primary:n})]})},o)}var T=function(e){var t=e.window,n=e.navigation,r=E(),o=Object(N.a)(),i=c.a.useState(!1),l=Object(s.a)(i,2),u=l[0],h=l[1],x=function(){console.log("handleDrawerToggle",u),h(!u)},g=Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:r.toolbar}),Object(a.jsx)(d.a,{}),Object(a.jsx)(m.a,{children:n.map((function(e,t){var n=e.path,r=e.name;return Object(a.jsx)(I,{to:n,primary:r,onClick:function(){return h(!1)}},t)}))})]}),v=void 0!==t?function(){return t().document.body}:void 0;return Object(a.jsx)(S.a,{children:Object(a.jsxs)("div",{className:r.root,children:[Object(a.jsx)(b.a,{}),Object(a.jsx)(j.a,{position:"fixed",className:r.appBar,children:Object(a.jsxs)(w.a,{children:[Object(a.jsx)(O.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:x,className:r.menuButton,children:Object(a.jsx)(y.a,{})}),Object(a.jsx)(C.a,{variant:"h6",noWrap:!0,children:Object(a.jsx)(P.c,{children:function(e){var t=e.location,a=n.filter((function(e){var n=e.path;return t.pathname.startsWith(n)}));return a.length>0?a[0].title:"TocataPedal"}})})]})}),Object(a.jsxs)("nav",{className:r.drawer,"aria-label":"mailbox folders",children:[Object(a.jsx)(p.a,{smUp:!0,implementation:"css",children:Object(a.jsx)(f.a,{container:v,variant:"temporary",anchor:"rtl"===o.direction?"right":"left",open:u,onClose:x,classes:{paper:r.drawerPaper},ModalProps:{keepMounted:!0},children:g})}),Object(a.jsx)(p.a,{xsDown:!0,implementation:"css",children:Object(a.jsx)(f.a,{classes:{paper:r.drawerPaper},variant:"permanent",open:!0,children:g})})]}),Object(a.jsxs)("main",{className:r.content,children:[Object(a.jsx)("div",{className:r.toolbar}),Object(a.jsxs)(P.e,{children:[n.map((function(e,t){var n=e.path,r=e.content;return Object(a.jsx)(P.c,{path:n,children:c.a.createElement(r,{})},t)})),Object(a.jsx)(P.b,{to:"/programs"})]})]})]})})},F=n(47),M=n(9),D=n.n(M),R=n(15),J=n(181),B=n(166),W=n(167),L=n(168),U=n(169),z=n(170),G=n(171),Y=n(172),q=n(173),H=n(174),K=n(175),V=n(184),Q=n(185),X=n(176),Z=Object(k.a)((function(e){return{root:{margin:e.spacing(1),minWidth:120},chip:{margin:e.spacing(.5,0)},card:{padding:e.spacing(1,2)}}}));function $(e){return _[e.type].description(e)}var _={PC:{name:"Program Change",values:[{name:"Program",field:"program",min:1}],description:function(e){return"".concat(e.program)}},CC:{name:"Control Change",values:[{name:"Control",field:"control",min:1},{name:"Value",field:"value"}],description:function(e){return"".concat(e.control,":").concat(e.value)}}};function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"PC";return _[e].values.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},t.field,t.min||0))}),{type:e})}function te(e){var t=e.id,n=e.action,c=e.setAction,o=e.onClose,i=e.open,j=Z(),b=Object(r.useState)(n||ee("PC")),d=Object(s.a)(b,2),f=d[0],p=d[1];function O(e){p(Object(l.a)(Object(l.a)({},f),{},Object(u.a)({},e.target.name,e.target.value)))}function m(e){var t=_[f.type].values[e];return t&&Object(a.jsx)(J.a,{type:"number",label:t.name,className:j.root,name:t.field,value:void 0===f[t.field]?t.min:f[t.field],onChange:O,inputProps:{min:void 0===t.min?0:t.min,max:void 0===t.max?127:t.max}})}return Object(r.useEffect)((function(){return p(n||ee("PC"))}),[n,i]),Object(a.jsxs)(B.a,{onClose:o,"aria-labelledby":"simple-dialog-title",open:i,children:[Object(a.jsx)(W.a,{id:"simple-dialog-title",children:"MIDI ACTION ".concat(Number(t)+1)}),Object(a.jsx)(L.a,{children:Object(a.jsxs)(U.a,{container:!0,direction:"column",alignItems:"flex-start",children:[Object(a.jsx)(J.a,{label:"Type",select:!0,name:"type",value:f.type,className:j.led,onChange:function(e){var t=e.target.value;p(n&&n.type===t?n:ee(t))},children:Object.keys(_).map((function(e,t){return Object(a.jsx)(z.a,{value:e,children:_[e].name},t)}))}),m(0),m(1)]})}),Object(a.jsxs)(G.a,{children:[Object(a.jsx)(Y.a,{variant:"contained",color:"primary",onClick:o,children:"Cancel"}),Object(a.jsx)(Y.a,{variant:"contained",color:"primary",onClick:function(){c(t,f),o()},children:"Update"})]})]})}function ne(e){var t=e.actions,n=e.setActions,c=e.title,o=Z(),i=Object(r.useState)(!1),u=Object(s.a)(i,2),j=u[0],b=u[1],d=Object(r.useState)({actions:t}),f=Object(s.a)(d,2),p=f[0],O=f[1];function m(e){var t=p.actions?p.actions[e]:null;O(Object(l.a)(Object(l.a)({},p),{},{id:e,action:t})),b(!0)}return Object(r.useEffect)((function(){return O({actions:t})}),[t]),Object(a.jsxs)(q.a,{className:o.root,children:[Object(a.jsx)(H.a,{className:o.card,title:c,titleTypographyProps:{variant:"subtitle1"}}),Object(a.jsx)(K.a,{className:o.card,children:Object(a.jsx)(U.a,{container:!0,direction:"column",alignItems:"flex-start",children:t&&t.length>0?t.map((function(e,t){return Object(a.jsx)(V.a,{className:o.chip,avatar:Object(a.jsx)(Q.a,{children:e.type}),variant:"outlined",label:$(e),clickable:!0,onClick:function(){return m(t)},onDelete:function(){return function(e){var t=Object(F.a)(p.actions);t.splice(e,1),O(Object(l.a)(Object(l.a)({},p),{},{actions:t})),n(t)}(t)}},t)})):"No actions"})}),Object(a.jsx)(X.a,{children:Object(a.jsx)(Y.a,{color:"primary",variant:"contained",size:"small",onClick:function(){m(t?t.length:0)},children:"Add"})}),Object(a.jsx)(te,{id:p.id,action:p.action,setAction:function(e,t){var a=p.actions||[];a[e]=t,O({actions:a,id:e,action:t}),n(a)},open:j,onClose:function(){return b(!1)}})]})}var ae=n(177),re=n(186),ce=n(178),oe=n(67),ie=n.n(oe),se=n(68),le=n.n(se),ue="A".charCodeAt(0),je=["blue","purple","red","yellow","green","turquoise"],be=Object(k.a)((function(e){return{root:{margin:e.spacing(1),minWidth:120},led:{margin:e.spacing(1)},icon:{margin:e.spacing(2,0,0,1)},fsEntry:{float:"left",width:90}}}));function de(e){var t=e.color;return Object(a.jsx)("div",{style:{width:15,height:15,borderWidth:1,borderStyle:"solid",borderRadius:"50%",backgroundColor:t,float:"left"}})}function fe(e){var t=e.id,n=e.footswitch,c=e.setFootswitch,o=e.onClose,i=e.open,j=be(),b=Object(r.useMemo)((function(){return{name:"",color:je[0],enabled:!1,momentary:!1,onActions:[],offActions:[]}}),[]),d=Object(r.useState)(Object(l.a)(Object(l.a)({},b),n)),f=Object(s.a)(d,2),p=f[0],O=f[1];function m(e){O(Object(l.a)(Object(l.a)({},p),{},Object(u.a)({},e.target.name,e.target.value)))}function h(e){O(Object(l.a)(Object(l.a)({},p),{},Object(u.a)({},e.target.name,e.target.checked)))}return Object(r.useEffect)((function(){return O(Object(l.a)(Object(l.a)({},b),n))}),[n,b]),Object(a.jsxs)(B.a,{onClose:o,"aria-labelledby":"simple-dialog-title",open:i,children:[Object(a.jsx)(W.a,{id:"simple-dialog-title",children:"FOOTSWITCH ".concat(String.fromCharCode(ue+Number(t)))}),Object(a.jsx)(L.a,{children:Object(a.jsxs)(U.a,{container:!0,direction:"column",alignItems:"flex-start",children:[Object(a.jsx)(J.a,{label:"Footswitch name",className:j.root,name:"name",value:p.name,onChange:m,inputProps:{maxLength:5}}),Object(a.jsx)(J.a,{label:"Color",select:!0,name:"color",value:p.color,className:j.led,onChange:m,children:je.map((function(e,t){return Object(a.jsx)(z.a,{value:e,children:Object(a.jsx)(de,{color:e})},t)}))}),Object(a.jsx)(ae.a,{className:j.root,control:Object(a.jsx)(re.a,{checked:p.enabled,name:"enabled",onChange:h}),label:"Default On"}),Object(a.jsx)(ae.a,{className:j.root,control:Object(a.jsx)(re.a,{checked:p.momentary,name:"momentary",onChange:h}),label:"Momentary"})]})}),Object(a.jsxs)(G.a,{children:[Object(a.jsx)(Y.a,{variant:"contained",color:"primary",onClick:o,children:"Cancel"}),Object(a.jsx)(Y.a,{variant:"contained",color:"primary",onClick:function(){c(t,p),o()},disabled:!p.name,children:"Update"})]})]})}function pe(e){var t=e.id,n=e.footswitch,r=void 0===n?{}:n,c=e.setFootswitch;return r.name?Object(a.jsxs)(U.a,{container:!0,direction:"row",alignItems:"flex-start",children:[Object(a.jsx)(ne,{actions:r.onActions,setActions:function(e){return c(t,Object(l.a)(Object(l.a)({},r),{},{onActions:e}))},title:"On MIDI"}),Object(a.jsx)(ne,{actions:r.offActions,setActions:function(e){return c(t,Object(l.a)(Object(l.a)({},r),{},{offActions:e}))},title:"Off MIDI"})]}):Object(a.jsx)("div",{})}function Oe(e){var t=e.footswitches,n=e.setFootswitches,c=be(),o=Object(r.useState)(g(t)),i=Object(s.a)(o,2),u=i[0],j=i[1],b=Object(r.useState)(!1),d=Object(s.a)(b,2),f=d[0],p=d[1],O=Object(r.useState)(0),m=Object(s.a)(O,2),h=m[0],x=m[1];function g(e){for(var t=e.map((function(e){return e?{name:e.name,color:e.color}:null})),n=t.length;n<6;++n)t.push(null);return t}function v(e,a){var r=a?Object(l.a)({},a):null;for(r&&!t[e]&&(r.onActions=[{type:"CC",control:Number(e)+32,value:127}],r.offActions=[{type:"CC",control:Number(e)+32,value:0}]),r&&(r.enabled||delete r.enabled,r.momentary||delete r.momentary,r.onActions&&0===r.onActions.length&&delete r.onActions,r.offActions&&0===r.offActions.length&&delete r.offActions),t[e]=r;t.length>0&&!t[t.length-1];)t.pop();n(t),j(g(t))}Object(r.useEffect)((function(){return j(g(t))}),[t]);return Object(a.jsxs)(U.a,{children:[Object(a.jsxs)(U.a,{children:[Object(a.jsx)(J.a,{label:"Footswitch",className:c.root,select:!0,value:h,onChange:function(e){var t=e.target.value;x(t)},children:u.map((function(e,t){return Object(a.jsx)(z.a,{value:t,children:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:c.fsEntry,children:"".concat(String.fromCharCode(ue+t)," - ").concat(e?e.name:"<EMPTY>")}),e?Object(a.jsx)(de,{color:e.color}):Object(a.jsx)("div",{})]})},t)}))}),Object(a.jsx)(ce.a,{className:c.icon,size:"small",color:"primary","aria-label":"edit",onClick:function(){return p(!0)},children:Object(a.jsx)(ie.a,{})}),Object(a.jsx)(ce.a,{className:c.icon,size:"small",color:"secondary","aria-label":"delete",onClick:function(){return v(h,null)},children:Object(a.jsx)(le.a,{})}),Object(a.jsx)(fe,{id:h,footswitch:t[h],setFootswitch:v,open:f,onClose:function(){return p(!1)}})]}),Object(a.jsx)(pe,{id:h,footswitch:t[h],setFootswitch:v})]})}var me=" ".repeat(30),he=99;function xe(){return ge.apply(this,arguments)}function ge(){return(ge=Object(R.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("readConfig"),e.next=3,fetch("/api/config");case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("updateConfig",t),e.next=3,fetch("/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteConfig"),e.next=3,fetch("/api/config",{method:"DELETE"});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(R.a)(D.a.mark((function e(){var t,n,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("readProgramNames"),e.next=3,fetch("/api/programs");case 3:return t=e.sent,e.next=6,t.text();case 6:return n=e.sent,a=n.match(/.{1,30}/g),e.abrupt("return",a.map((function(e){return e===me?null:e})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(R.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("readProgram",t),e.next=3,fetch("/api/programs?id=".concat(t));case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(R.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("updateProgram",t,n),e.next=3,fetch("/api/programs?id=".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleteProgram",t),e.next=3,fetch("/api/programs?id=".concat(t),{method:"DELETE"});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(){return Me.apply(this,arguments)}function Me(){return(Me=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("restart"),e.next=3,fetch("/api/restart",{method:"POST"});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(R.a)(D.a.mark((function e(t){var n,a,r,c,o,i,s,l,u,j;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){n+=e,t&&t(n)},n=0,console.log("start readAll"),e.next=5,ke();case 5:return r=e.sent,a(5),e.next=9,xe();case 9:c=e.sent,o=c.wifi,a(5),i=r.reduce((function(e,t,n){return t?[].concat(Object(F.a)(e),[n]):e}),[]),s=[],l=(100-n)/i.length,e.t0=D.a.keys(i);case 16:if((e.t1=e.t0()).done){e.next=25;break}return u=e.t1.value,j=i[u],e.next=21,Se(j);case 21:s[j]=e.sent,a(l),e.next=16;break;case 25:return t&&t(100),console.log("end readAll"),e.abrupt("return",{wifi:o,programs:s});case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e,t){return Be.apply(this,arguments)}function Be(){return(Be=Object(R.a)(D.a.mark((function e(t,n){var a,r,c,o,i,s,l,u;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=function(e){o+=e,n&&n(o)},a=t.wifi,r=t.programs,c=void 0===r?[]:r,o=0,console.log("start updateAll"),s=1,l=0;case 6:if(!(l<he)){e.next=14;break}return u=c[l],e.next=10,u?Ae(l,u):Ie(l);case 10:i(s);case 11:++l,e.next=6;break;case 14:return e.next=16,a?ve({wifi:a}):we();case 16:i(1),console.log("end updateAll");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(R.a)(D.a.mark((function e(t){var n,a,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(e){n+=e,t&&t(n)},n=0,console.log("start restore"),r=1,c=0;case 5:if(!(c<he)){e.next=12;break}return e.next=8,Ie(c);case 8:a(r);case 9:++c,e.next=5;break;case 12:return e.next=14,we();case 14:a(1),console.log("end restore");case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){return new Promise((function(t){return setTimeout(t,e)}))}function ze(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(R.a)(D.a.mark((function e(t){var n,a,r,c,o,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){n+=e,t&&t(n)},n=0,console.log("start restart"),e.next=5,Fe();case 5:a(5),o=(100-n)/((r=5e3)/(c=500)),console.log("waiting ".concat(r/1e3," seconds")),i=0;case 11:if(!(i<r)){e.next=18;break}return e.next=14,Ue(c);case 14:i+=c,a(o),e.next=11;break;case 18:console.log("end restart");case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ye=n(179),qe="Are you sure you want to discard the changes made to this program?",He=Object(k.a)((function(e){return{root:{margin:e.spacing(1),minWidth:120},icon:{margin:e.spacing(2,0,0,1)}}})),Ke=function(e,t){return"".concat(Number(t)+1," - ").concat(e||"<EMPTY>")};function Ve(e,t){if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t||null==e||null==t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var r=0,c=n;r<c.length;r++){var o=c[r];if(!a.includes(o)||!Ve(e[o],t[o]))return!1}return!0}function Qe(e){var t=e.id,n=e.program,c=e.setProgram,o=e.onClose,i=e.open,j=He(),b=Object(r.useMemo)((function(){return{name:"",actions:[],fs:[]}}),[]),d=Object(r.useState)(Object(l.a)(Object(l.a)({},b),n)),f=Object(s.a)(d,2),p=f[0],O=f[1];return Object(r.useEffect)((function(){return O(Object(l.a)(Object(l.a)({},b),n))}),[n,b]),Object(a.jsxs)(B.a,{onClose:o,"aria-labelledby":"simple-dialog-title",open:i,children:[Object(a.jsx)(W.a,{id:"simple-dialog-title",children:"PROGRAM ".concat(Number(t)+1)}),Object(a.jsx)(L.a,{children:Object(a.jsx)(J.a,{label:"Name",name:"name",className:j.root,value:p.name,onChange:function(e){var t=Object(l.a)(Object(l.a)({},p),{},Object(u.a)({},e.target.name,e.target.value));O(t)},inputProps:{maxLength:30}})}),Object(a.jsxs)(G.a,{children:[Object(a.jsx)(Y.a,{variant:"contained",color:"primary",onClick:o,children:"Cancel"}),Object(a.jsx)(Y.a,{variant:"contained",color:"primary",onClick:function(){c(t,p),o()},disabled:!p.name,children:"Update"})]})]})}function Xe(e){var t=e.id,n=e.program,c=e.setProgram;n.name||(n.actions=[{type:"PC",program:Number(t)+1}]);var o=Object(r.useMemo)((function(){return{name:"",actions:[],fs:[]}}),[]),i=Object(r.useState)(Object(l.a)(Object(l.a)({},o),n)),u=Object(s.a)(i,2),j=u[0],b=u[1];return Object(r.useEffect)((function(){b(Object(l.a)(Object(l.a)({},o),n))}),[n,o]),n.name?Object(a.jsxs)(U.a,{container:!0,direction:"column",alignItems:"flex-start",children:[Object(a.jsx)(ne,{actions:n.actions,setActions:function(e){return c(t,Object(l.a)(Object(l.a)({},n),{},{actions:e}))},title:"Program MIDI"}),Object(a.jsx)(Oe,{footswitches:j.fs?j.fs:[],setFootswitches:function(e){var n=Object(l.a)(Object(l.a)({},j),{},{fs:e});b(n),c(t,n)}})]}):Object(a.jsx)("div",{})}function Ze(){var e=He(),t=new URLSearchParams(Object(P.i)().search).get("id")||0,n=Object(P.h)(),c=Object(r.useState)(null),o=Object(s.a)(c,2),i=o[0],l=o[1],u=Object(r.useState)(!1),j=Object(s.a)(u,2),b=j[0],f=j[1],p=Object(r.useState)(null),O=Object(s.a)(p,2),m=O[0],h=O[1],x=Object(r.useState)(null),g=Object(s.a)(x,2),v=g[0],y=g[1],w=Object(P.j)().path;Object(r.useEffect)((function(){function e(){return(e=Object(R.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(null),e.next=3,ke();case 3:t=e.sent,l(t.map(Ke));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){function e(){return(e=Object(R.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(null),e.next=3,Se(t);case 3:n=e.sent,h(n),y(JSON.parse(JSON.stringify(n)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(t)}),[t]);var C=function(){return v&&m&&!Ve(k(v),k(m))};function k(e){return e?(e.fs&&0===e.fs.length&&delete e.fs,e.actions&&0===e.actions.length&&delete e.actions,e):null}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n){var a=k(t);y(a),Ae(e,a)}t||Ie(e);var r=Object(F.a)(i);r[e]=Ke(t?t.name:null,e),l(r),h(t||{})}return i?Object(a.jsxs)("div",{children:[Object(a.jsx)(P.a,{when:m&&C(),message:function(){return qe}}),Object(a.jsxs)("div",{children:[Object(a.jsx)(J.a,{label:"Program",className:e.root,select:!0,value:t,onChange:function(e){var a=e.target.value;a!==t&&(m.name&&C()?window.confirm(qe)&&(N(t,v),n.push("".concat(w,"?id=").concat(a))):n.push("".concat(w,"?id=").concat(a)))},children:i.map((function(e,t){return Object(a.jsx)(z.a,{value:t,children:e},t)}))}),Object(a.jsx)(ce.a,{className:e.icon,size:"small",color:"primary","aria-label":"edit",disabled:!m,onClick:function(){return f(!0)},children:Object(a.jsx)(ie.a,{})}),Object(a.jsx)(ce.a,{className:e.icon,size:"small",color:"secondary","aria-label":"delete",disabled:!m||!m.name,onClick:function(){return N(t,null)},children:Object(a.jsx)(le.a,{})}),Object(a.jsx)(Qe,{id:t,program:m,setProgram:N,open:b,onClose:function(){return f(!1)}})]}),Object(a.jsx)(d.a,{}),m?Object(a.jsx)(Xe,{id:t,program:m,setProgram:N}):Object(a.jsx)(Ye.a,{}),m&&m.name&&Object(a.jsxs)(U.a,{children:[Object(a.jsx)(d.a,{}),Object(a.jsx)(Y.a,{color:"primary",variant:"contained",className:e.root,disabled:!C(),onClick:function(){return N(t,m,!0)},children:"Save"}),Object(a.jsx)(Y.a,{color:"secondary",variant:"contained",className:e.root,disabled:!C(),onClick:function(){return N(t,JSON.parse(JSON.stringify(v)))},children:"Discard"})]})]}):Object(a.jsx)(Ye.a,{})}var $e=Object(k.a)((function(e){return{root:{margin:e.spacing(1),minWidth:120}}}));function _e(){var e=$e(),t=Object(r.useState)(null),n=Object(s.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(!1),j=Object(s.a)(i,2),b=j[0],d=j[1];function f(){return(f=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,ve(c);case 3:d(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){var t=e.target.name.split("."),n=Object(s.a)(t,2),a=n[0],r=n[1];o(Object(l.a)(Object(l.a)({},c),{},Object(u.a)({},a,Object(l.a)(Object(l.a)({},c[a]),{},Object(u.a)({},r,e.target.value)))))}return Object(r.useEffect)((function(){function e(){return(e=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(null),e.t0=o,e.next=4,xe();case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(J.a,{label:"SSID",className:e.root,name:"wifi.ssid",value:c.wifi?c.wifi.ssid:"",onChange:p}),Object(a.jsx)(J.a,{label:"Key",className:e.root,name:"wifi.key",value:c.wifi?c.wifi.key:"",onChange:p})]}),Object(a.jsx)(Y.a,{variant:"contained",color:"primary",className:e.root,onClick:function(){return f.apply(this,arguments)},disabled:b,children:"Save"})]}):Object(a.jsx)(Ye.a,{})}var et=Object(k.a)((function(e){return{root:{margin:e.spacing(1),minWidth:120}}}));function tt(){var e=et(),t=Object(r.useState)(-1),n=Object(s.a)(t,2),c=n[0],o=n[1];function i(){return(i=Object(R.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(0),e.next=3,De(o);case 3:t=e.sent,(n=document.createElement("a")).setAttribute("href","data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t,null,2)))),n.setAttribute("download","TocataConfig.json"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),o(-1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(0),e.next=3,We(o);case 3:o(-1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(0),e.next=3,ze(o);case 3:o(-1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)("div",{children:[Object(a.jsxs)(U.a,{container:!0,direction:"column",alignItems:"flex-start",children:[Object(a.jsx)(Y.a,{color:"primary",variant:"contained",className:e.root,onClick:function(){return i.apply(this,arguments)},disabled:c>=0,children:"Backup"}),Object(a.jsx)("input",{accept:"application/JSON",id:"restore-file",type:"file",onChange:function(e){var t=e.target.files;if(t.length<=0)return!1;var n=new FileReader;n.onload=function(){var e=Object(R.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=JSON.parse(t.target.result)){e.next=4;break}return alert("Invalid configuration"),e.abrupt("return",!1);case 4:return o(0),e.next=7,Je(n,o);case 7:o(-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.readAsText(t.item(0))},hidden:!0}),Object(a.jsx)("label",{htmlFor:"restore-file",children:Object(a.jsx)(Y.a,{color:"secondary",variant:"contained",component:"span",disabled:c>=0,className:e.root,children:"Restore"})}),Object(a.jsx)(Y.a,{color:"primary",variant:"contained",className:e.root,onClick:function(){return l.apply(this,arguments)},disabled:c>=0,children:"Reset"}),Object(a.jsx)(Y.a,{color:"secondary",variant:"contained",className:e.root,onClick:function(){return u.apply(this,arguments)},disabled:c>=0,children:"Restart"})]}),Object(a.jsx)("div",{children:c>=0&&Object(a.jsx)(Ye.a,{variant:"determinate",value:c})})]})}function nt(){return Object(a.jsx)(C.a,{children:"Coming soon..."})}var at=n(165),rt=n(89),ct=n(180);function ot(){var e=Object(at.a)("(prefers-color-scheme: dark)"),t=Object(r.useMemo)((function(){return Object(rt.a)({palette:{type:e?"dark":"light"}})}),[e]),n=[{path:"/programs",name:"Programs",title:"Programs",content:Ze},{path:"/config",name:"Configuration",title:"System configuration",content:_e},{path:"/backup",name:"Backup",title:"Backup / Restore",content:tt},{path:"/firmware",name:"Firmware",title:"Firmware update",content:nt}];return Object(a.jsxs)(ct.a,{theme:t,children:[Object(a.jsx)(b.a,{}),Object(a.jsx)(T,{navigation:n})]})}var it=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,187)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};i.a.render(Object(a.jsx)(ot,{}),document.getElementById("root")),it()}},[[113,1,2]]]);