(this["webpackJsonptocata-pedal"]=this["webpackJsonptocata-pedal"]||[]).push([[0],{114:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),o=n(13),i=n.n(o),s=n(15),l=n(9),u=n(21),j=n(163),b=n(162),d=n(160),p=n(184),f=n(183),O=n(165),m=n(161),h=n(116),x=n(158),v=n(159),g=n(89),y=n.n(g),w=n(164),C=n(33),k=n(155),N=n(18),A=n(76),S=n(16),P=240,I=Object(k.a)((function(e){return{root:{display:"flex"},drawer:Object(u.a)({},e.breakpoints.up("sm"),{width:P,flexShrink:0}),appBar:Object(u.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(P,"px)"),marginLeft:P}),menuButton:Object(u.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:P},content:{flexGrow:1,padding:e.spacing(3)}}}));function M(e){var t=e.icon,n=e.primary,r=e.to,o=e.index,i=e.onClick,s=c.a.useMemo((function(){return c.a.forwardRef((function(e,t){return Object(a.jsx)(A.a,Object(l.a)({to:r,ref:t},e))}))}),[r]);return Object(a.jsx)("li",{children:Object(a.jsxs)(h.a,{button:!0,component:s,onClick:i,children:[t?Object(a.jsx)(x.a,{children:t}):null,Object(a.jsx)(v.a,{primary:n})]})},o)}var F=function(e){var t=e.window,n=e.navigation,r=I(),o=Object(N.a)(),i=c.a.useState(!1),l=Object(s.a)(i,2),u=l[0],h=l[1],x=function(){console.log("handleDrawerToggle",u),h(!u)},v=Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:r.toolbar}),Object(a.jsx)(d.a,{}),Object(a.jsx)(m.a,{children:n.map((function(e,t){var n=e.path,r=e.name;return Object(a.jsx)(M,{to:n,primary:r,onClick:function(){return h(!1)}},t)}))})]}),g=void 0!==t?function(){return t().document.body}:void 0;return Object(a.jsx)(S.a,{children:Object(a.jsxs)("div",{className:r.root,children:[Object(a.jsx)(b.a,{}),Object(a.jsx)(j.a,{position:"fixed",className:r.appBar,children:Object(a.jsxs)(w.a,{children:[Object(a.jsx)(O.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:x,className:r.menuButton,children:Object(a.jsx)(y.a,{})}),Object(a.jsx)(C.a,{variant:"h6",noWrap:!0,children:Object(a.jsx)(S.d,{children:function(e){var t=e.location,a=n.filter((function(e){var n=e.path;return t.pathname.startsWith(n)}));return a.length>0?a[0].title:"TocataPedal"}})})]})}),Object(a.jsxs)("nav",{className:r.drawer,"aria-label":"mailbox folders",children:[Object(a.jsx)(f.a,{smUp:!0,implementation:"css",children:Object(a.jsx)(p.a,{container:g,variant:"temporary",anchor:"rtl"===o.direction?"right":"left",open:u,onClose:x,classes:{paper:r.drawerPaper},ModalProps:{keepMounted:!0},children:v})}),Object(a.jsx)(f.a,{xsDown:!0,implementation:"css",children:Object(a.jsx)(p.a,{classes:{paper:r.drawerPaper},variant:"permanent",open:!0,children:v})})]}),Object(a.jsxs)("main",{className:r.content,children:[Object(a.jsx)("div",{className:r.toolbar}),Object(a.jsxs)(S.f,{children:[n.map((function(e,t){var n=e.path,r=e.content;return Object(a.jsx)(S.d,{path:n,children:c.a.createElement(r,{})},t)})),Object(a.jsx)(S.c,{to:"/programs"})]})]})]})})},T=n(48),E=n(8),D=n.n(E),R=n(14),W=n(182),B=n(167),J=n(168),U=n(169),L=n(170),z=n(171),q=n(172),G=n(173),Y=n(174),H=n(175),K=n(176),V=n(185),Q=n(186),X=n(177),Z=Object(k.a)((function(e){return{root:{margin:e.spacing(1),minWidth:120},chip:{margin:e.spacing(.5,0)},card:{padding:e.spacing(1,2)}}}));function $(e){return _[e.type].description(e)}var _={PC:{name:"Program Change",values:[{name:"Program",field:"program",min:1}],description:function(e){return"".concat(e.program)}},CC:{name:"Control Change",values:[{name:"Control",field:"control",min:1},{name:"Value",field:"value"}],description:function(e){return"".concat(e.control,":").concat(e.value)}}};function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"PC";return _[e].values.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object(u.a)({},t.field,t.min||0))}),{type:e})}function te(e){var t=e.id,n=e.action,c=e.setAction,o=e.onClose,i=e.open,j=Z(),b=Object(r.useState)(n||ee("PC")),d=Object(s.a)(b,2),p=d[0],f=d[1];function O(e){f(Object(l.a)(Object(l.a)({},p),{},Object(u.a)({},e.target.name,e.target.value)))}function m(e){var t=_[p.type].values[e];return t&&Object(a.jsx)(W.a,{type:"number",label:t.name,className:j.root,name:t.field,value:void 0===p[t.field]?t.min:p[t.field],onChange:O,inputProps:{min:void 0===t.min?0:t.min,max:void 0===t.max?127:t.max}})}return Object(r.useEffect)((function(){return f(n||ee("PC"))}),[n,i]),Object(a.jsxs)(B.a,{onClose:o,"aria-labelledby":"simple-dialog-title",open:i,children:[Object(a.jsx)(J.a,{id:"simple-dialog-title",children:"MIDI ACTION ".concat(Number(t)+1)}),Object(a.jsx)(U.a,{children:Object(a.jsxs)(L.a,{container:!0,direction:"column",alignItems:"flex-start",children:[Object(a.jsx)(W.a,{label:"Type",select:!0,name:"type",value:p.type,className:j.led,onChange:function(e){var t=e.target.value;f(n&&n.type===t?n:ee(t))},children:Object.keys(_).map((function(e,t){return Object(a.jsx)(z.a,{value:e,children:_[e].name},t)}))}),m(0),m(1)]})}),Object(a.jsxs)(q.a,{children:[Object(a.jsx)(G.a,{variant:"contained",color:"primary",onClick:o,children:"Cancel"}),Object(a.jsx)(G.a,{variant:"contained",color:"primary",onClick:function(){c(t,p),o()},children:"Update"})]})]})}function ne(e){var t=e.actions,n=e.setActions,c=e.title,o=Z(),i=Object(r.useState)(!1),u=Object(s.a)(i,2),j=u[0],b=u[1],d=Object(r.useState)({actions:t}),p=Object(s.a)(d,2),f=p[0],O=p[1];function m(e){var t=f.actions?f.actions[e]:null;O(Object(l.a)(Object(l.a)({},f),{},{id:e,action:t})),b(!0)}return Object(r.useEffect)((function(){return O({actions:t})}),[t]),Object(a.jsxs)(Y.a,{className:o.root,children:[Object(a.jsx)(H.a,{className:o.card,title:c,titleTypographyProps:{variant:"subtitle1"}}),Object(a.jsx)(K.a,{className:o.card,children:Object(a.jsx)(L.a,{container:!0,direction:"column",alignItems:"flex-start",children:t&&t.length>0?t.map((function(e,t){return Object(a.jsx)(V.a,{className:o.chip,avatar:Object(a.jsx)(Q.a,{children:e.type}),variant:"outlined",label:$(e),clickable:!0,onClick:function(){return m(t)},onDelete:function(){return function(e){var t=Object(T.a)(f.actions);t.splice(e,1),O(Object(l.a)(Object(l.a)({},f),{},{actions:t})),n(t)}(t)}},t)})):"No actions"})}),Object(a.jsx)(X.a,{children:Object(a.jsx)(G.a,{color:"primary",variant:"contained",size:"small",onClick:function(){m(t?t.length:0)},children:"Add"})}),Object(a.jsx)(te,{id:f.id,action:f.action,setAction:function(e,t){var a=f.actions||[];a[e]=t,O({actions:a,id:e,action:t}),n(a)},open:j,onClose:function(){return b(!1)}})]})}var ae=n(178),re=n(187),ce=n(179),oe=n(66),ie=n.n(oe),se=n(67),le=n.n(se),ue="A".charCodeAt(0),je=["blue","purple","red","yellow","green","turquoise"],be=Object(k.a)((function(e){return{root:{margin:e.spacing(1),minWidth:120},led:{margin:e.spacing(1)},icon:{margin:e.spacing(2,0,0,1)},fsEntry:{float:"left",width:90}}}));function de(e){var t=e.color;return Object(a.jsx)("div",{style:{width:15,height:15,borderWidth:1,borderStyle:"solid",borderRadius:"50%",backgroundColor:t,float:"left"}})}function pe(e){var t=e.id,n=e.footswitch,c=e.setFootswitch,o=e.onClose,i=e.open,j=be(),b=Object(r.useMemo)((function(){return{name:"",color:je[0],enabled:!1,momentary:!1,onActions:[],offActions:[]}}),[]),d=Object(r.useState)(Object(l.a)(Object(l.a)({},b),n)),p=Object(s.a)(d,2),f=p[0],O=p[1];function m(e){O(Object(l.a)(Object(l.a)({},f),{},Object(u.a)({},e.target.name,e.target.value)))}function h(e){O(Object(l.a)(Object(l.a)({},f),{},Object(u.a)({},e.target.name,e.target.checked)))}return Object(r.useEffect)((function(){return O(Object(l.a)(Object(l.a)({},b),n))}),[n,b]),Object(a.jsxs)(B.a,{onClose:o,"aria-labelledby":"simple-dialog-title",open:i,children:[Object(a.jsx)(J.a,{id:"simple-dialog-title",children:"FOOTSWITCH ".concat(String.fromCharCode(ue+Number(t)))}),Object(a.jsx)(U.a,{children:Object(a.jsxs)(L.a,{container:!0,direction:"column",alignItems:"flex-start",children:[Object(a.jsx)(W.a,{label:"Footswitch name",className:j.root,name:"name",value:f.name,onChange:m,inputProps:{maxLength:5}}),Object(a.jsx)(W.a,{label:"Color",select:!0,name:"color",value:f.color,className:j.led,onChange:m,children:je.map((function(e,t){return Object(a.jsx)(z.a,{value:e,children:Object(a.jsx)(de,{color:e})},t)}))}),Object(a.jsx)(ae.a,{className:j.root,control:Object(a.jsx)(re.a,{checked:f.enabled,name:"enabled",onChange:h}),label:"Default On"}),Object(a.jsx)(ae.a,{className:j.root,control:Object(a.jsx)(re.a,{checked:f.momentary,name:"momentary",onChange:h}),label:"Momentary"})]})}),Object(a.jsxs)(q.a,{children:[Object(a.jsx)(G.a,{variant:"contained",color:"primary",onClick:o,children:"Cancel"}),Object(a.jsx)(G.a,{variant:"contained",color:"primary",onClick:function(){c(t,f),o()},disabled:!f.name,children:"Update"})]})]})}function fe(e){var t=e.id,n=e.footswitch,r=void 0===n?{}:n,c=e.setFootswitch;return r.name?Object(a.jsxs)(L.a,{container:!0,direction:"row",alignItems:"flex-start",children:[Object(a.jsx)(ne,{actions:r.onActions,setActions:function(e){return c(t,Object(l.a)(Object(l.a)({},r),{},{onActions:e}))},title:"On MIDI"}),Object(a.jsx)(ne,{actions:r.offActions,setActions:function(e){return c(t,Object(l.a)(Object(l.a)({},r),{},{offActions:e}))},title:"Off MIDI"})]}):Object(a.jsx)("div",{})}function Oe(e){var t=e.footswitches,n=e.setFootswitches,c=be(),o=Object(r.useState)(v(t)),i=Object(s.a)(o,2),u=i[0],j=i[1],b=Object(r.useState)(!1),d=Object(s.a)(b,2),p=d[0],f=d[1],O=Object(r.useState)(0),m=Object(s.a)(O,2),h=m[0],x=m[1];function v(e){for(var t=e.map((function(e){return e?{name:e.name,color:e.color}:null})),n=t.length;n<6;++n)t.push(null);return t}function g(e,a){var r=a?Object(l.a)({},a):null;for(r&&!t[e]&&(r.onActions=[{type:"CC",control:Number(e)+32,value:127}],r.offActions=[{type:"CC",control:Number(e)+32,value:0}]),r&&(r.enabled||delete r.enabled,r.momentary||delete r.momentary,r.onActions&&0===r.onActions.length&&delete r.onActions,r.offActions&&0===r.offActions.length&&delete r.offActions),t[e]=r;t.length>0&&!t[t.length-1];)t.pop();n(t),j(v(t))}Object(r.useEffect)((function(){return j(v(t))}),[t]);return Object(a.jsxs)(L.a,{children:[Object(a.jsxs)(L.a,{children:[Object(a.jsx)(W.a,{label:"Footswitch",className:c.root,select:!0,value:h,onChange:function(e){var t=e.target.value;x(t)},children:u.map((function(e,t){return Object(a.jsx)(z.a,{value:t,children:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:c.fsEntry,children:"".concat(String.fromCharCode(ue+t)," - ").concat(e?e.name:"<EMPTY>")}),e?Object(a.jsx)(de,{color:e.color}):Object(a.jsx)("div",{})]})},t)}))}),Object(a.jsx)(ce.a,{className:c.icon,size:"small",color:"primary","aria-label":"edit",onClick:function(){return f(!0)},children:Object(a.jsx)(ie.a,{})}),Object(a.jsx)(ce.a,{className:c.icon,size:"small",color:"secondary","aria-label":"delete",onClick:function(){return g(h,null)},children:Object(a.jsx)(le.a,{})}),Object(a.jsx)(pe,{id:h,footswitch:t[h],setFootswitch:g,open:p,onClose:function(){return f(!1)}})]}),Object(a.jsx)(fe,{id:h,footswitch:t[h],setFootswitch:g})]})}var me=n(79),he=" ".repeat(30),xe=99;function ve(){return(ve=Object(R.a)(D.a.mark((function e(){var t,n,a,r,c,o,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.requestMIDIAccess){e.next=3;break}return console.log("WebMIDI is not supported in this browser"),e.abrupt("return");case 3:return console.log("requesting access"),e.next=6,navigator.requestMIDIAccess({sysex:!0});case 6:t=e.sent,n=Object(me.a)(t.inputs.values());try{for(n.s();!(a=n.n()).done;)r=a.value,console.log("input",r.name),r.name.includes("TocataPedal IN")&&(console.log("found in",r),r.onmidimessage=function(e){var t=e.data;console.log("received",t)},ge.input=r)}catch(s){n.e(s)}finally{n.f()}c=Object(me.a)(t.outputs.values());try{for(c.s();!(o=c.n()).done;)i=o.value,console.log("output",i.name),i.name.includes("TocataPedal OUT")&&(console.log("found out",i),ge.output=i)}catch(s){c.e(s)}finally{c.f()}case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ge={input:null,output:null};function ye(){return we.apply(this,arguments)}function we(){return(we=Object(R.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 4:return t=e.sent,e.next=7,t.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(R.a)(D.a.mark((function e(){var t,n,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Array(xe).fill(null));case 4:return t=e.sent,e.next=7,t.text();case 7:return n=e.sent,a=n.match(/.{1,30}/g),e.abrupt("return",a.map((function(e){return e===he?null:e})));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(R.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 4:return n=e.sent,e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e,t){return Te.apply(this,arguments)}function Te(){return(Te=Object(R.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){return De.apply(this,arguments)}function De(){return(De=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(){return We.apply(this,arguments)}function We(){return(We=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){return Je.apply(this,arguments)}function Je(){return(Je=Object(R.a)(D.a.mark((function e(t){var n,a,r,c,o,i,s,l,u,j;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){n+=e,t&&t(n)},n=0,console.log("start readAll"),e.next=5,Se();case 5:return r=e.sent,a(5),e.next=9,ye();case 9:c=e.sent,o=c.wifi,a(5),i=r.reduce((function(e,t,n){return t?[].concat(Object(T.a)(e),[n]):e}),[]),s=[],l=(100-n)/i.length,e.t0=D.a.keys(i);case 16:if((e.t1=e.t0()).done){e.next=25;break}return u=e.t1.value,j=i[u],e.next=21,Ie(j);case 21:s[j]=e.sent,a(l),e.next=16;break;case 25:return t&&t(100),console.log("end readAll"),e.abrupt("return",{wifi:o,programs:s});case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e,t){return Le.apply(this,arguments)}function Le(){return(Le=Object(R.a)(D.a.mark((function e(t,n){var a,r,c,o,i,s,l,u;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=function(e){o+=e,n&&n(o)},a=t.wifi,r=t.programs,c=void 0===r?[]:r,o=0,console.log("start updateAll"),s=1,l=0;case 6:if(!(l<xe)){e.next=14;break}return u=c[l],e.next=10,u?Fe(l,u):Ee(l);case 10:i(s);case 11:++l,e.next=6;break;case 14:return e.next=16,a?Ce({wifi:a}):Ne();case 16:i(1),console.log("end updateAll");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e){return qe.apply(this,arguments)}function qe(){return(qe=Object(R.a)(D.a.mark((function e(t){var n,a,r,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(e){n+=e,t&&t(n)},n=0,console.log("start restore"),r=1,c=0;case 5:if(!(c<xe)){e.next=12;break}return e.next=8,Ee(c);case 8:a(r);case 9:++c,e.next=5;break;case 12:return e.next=14,Ne();case 14:a(1),console.log("end restore");case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e){return new Promise((function(t){return setTimeout(t,e)}))}function Ye(e){return He.apply(this,arguments)}function He(){return(He=Object(R.a)(D.a.mark((function e(t){var n,a,r,c,o,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){n+=e,t&&t(n)},n=0,console.log("start restart"),e.next=5,Re();case 5:a(5),o=(100-n)/((r=5e3)/(c=500)),console.log("waiting ".concat(r/1e3," seconds")),i=0;case 11:if(!(i<r)){e.next=18;break}return e.next=14,Ge(c);case 14:i+=c,a(o),e.next=11;break;case 18:console.log("end restart");case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){ve.apply(this,arguments)}();var Ke=n(180),Ve="Are you sure you want to discard the changes made to this program?",Qe=Object(k.a)((function(e){return{root:{margin:e.spacing(1),minWidth:120},icon:{margin:e.spacing(2,0,0,1)}}})),Xe=function(e,t){return"".concat(Number(t)+1," - ").concat(e||"<EMPTY>")};function Ze(e,t){if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t||null==e||null==t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var r=0,c=n;r<c.length;r++){var o=c[r];if(!a.includes(o)||!Ze(e[o],t[o]))return!1}return!0}function $e(e){var t=e.id,n=e.program,c=e.setProgram,o=e.onClose,i=e.open,j=Qe(),b=Object(r.useMemo)((function(){return{name:"",actions:[],fs:[]}}),[]),d=Object(r.useState)(Object(l.a)(Object(l.a)({},b),n)),p=Object(s.a)(d,2),f=p[0],O=p[1];return Object(r.useEffect)((function(){return O(Object(l.a)(Object(l.a)({},b),n))}),[n,b]),Object(a.jsxs)(B.a,{onClose:o,"aria-labelledby":"simple-dialog-title",open:i,children:[Object(a.jsx)(J.a,{id:"simple-dialog-title",children:"PROGRAM ".concat(Number(t)+1)}),Object(a.jsx)(U.a,{children:Object(a.jsx)(W.a,{label:"Name",name:"name",className:j.root,value:f.name,onChange:function(e){var t=Object(l.a)(Object(l.a)({},f),{},Object(u.a)({},e.target.name,e.target.value));O(t)},inputProps:{maxLength:30}})}),Object(a.jsxs)(q.a,{children:[Object(a.jsx)(G.a,{variant:"contained",color:"primary",onClick:o,children:"Cancel"}),Object(a.jsx)(G.a,{variant:"contained",color:"primary",onClick:function(){c(t,f),o()},disabled:!f.name,children:"Update"})]})]})}function _e(e){var t=e.id,n=e.program,c=e.setProgram;n.name||(n.actions=[{type:"PC",program:Number(t)+1}]);var o=Object(r.useMemo)((function(){return{name:"",actions:[],fs:[]}}),[]),i=Object(r.useState)(Object(l.a)(Object(l.a)({},o),n)),u=Object(s.a)(i,2),j=u[0],b=u[1];return Object(r.useEffect)((function(){b(Object(l.a)(Object(l.a)({},o),n))}),[n,o]),n.name?Object(a.jsxs)(L.a,{container:!0,direction:"column",alignItems:"flex-start",children:[Object(a.jsx)(ne,{actions:n.actions,setActions:function(e){return c(t,Object(l.a)(Object(l.a)({},n),{},{actions:e}))},title:"Program MIDI"}),Object(a.jsx)(Oe,{footswitches:j.fs?j.fs:[],setFootswitches:function(e){var n=Object(l.a)(Object(l.a)({},j),{},{fs:e});b(n),c(t,n)}})]}):Object(a.jsx)("div",{})}function et(){var e=Qe(),t=new URLSearchParams(Object(S.j)().search).get("id")||0,n=Object(S.i)(),c=Object(r.useState)(null),o=Object(s.a)(c,2),i=o[0],l=o[1],u=Object(r.useState)(!1),j=Object(s.a)(u,2),b=j[0],p=j[1],f=Object(r.useState)(null),O=Object(s.a)(f,2),m=O[0],h=O[1],x=Object(r.useState)(null),v=Object(s.a)(x,2),g=v[0],y=v[1],w=Object(S.k)().path;Object(r.useEffect)((function(){function e(){return(e=Object(R.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(null),e.next=3,Se();case 3:t=e.sent,l(t.map(Xe));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){function e(){return(e=Object(R.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(null),e.next=3,Ie(t);case 3:n=e.sent,h(n),y(JSON.parse(JSON.stringify(n)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(t)}),[t]);var C=function(){return g&&m&&!Ze(k(g),k(m))};function k(e){return e?(e.fs&&0===e.fs.length&&delete e.fs,e.actions&&0===e.actions.length&&delete e.actions,e):null}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n){var a=k(t);y(a),Fe(e,a)}t||Ee(e);var r=Object(T.a)(i);r[e]=Xe(t?t.name:null,e),l(r),h(t||{})}return i?Object(a.jsxs)("div",{children:[Object(a.jsx)(S.b,{when:m&&C(),message:function(){return Ve}}),Object(a.jsxs)("div",{children:[Object(a.jsx)(W.a,{label:"Program",className:e.root,select:!0,value:t,onChange:function(e){var a=e.target.value;a!==t&&(m.name&&C()?window.confirm(Ve)&&(N(t,g),n.push("".concat(w,"?id=").concat(a))):n.push("".concat(w,"?id=").concat(a)))},children:i.map((function(e,t){return Object(a.jsx)(z.a,{value:t,children:e},t)}))}),Object(a.jsx)(ce.a,{className:e.icon,size:"small",color:"primary","aria-label":"edit",disabled:!m,onClick:function(){return p(!0)},children:Object(a.jsx)(ie.a,{})}),Object(a.jsx)(ce.a,{className:e.icon,size:"small",color:"secondary","aria-label":"delete",disabled:!m||!m.name,onClick:function(){return N(t,null)},children:Object(a.jsx)(le.a,{})}),Object(a.jsx)($e,{id:t,program:m,setProgram:N,open:b,onClose:function(){return p(!1)}})]}),Object(a.jsx)(d.a,{}),m?Object(a.jsx)(_e,{id:t,program:m,setProgram:N}):Object(a.jsx)(Ke.a,{}),m&&m.name&&Object(a.jsxs)(L.a,{children:[Object(a.jsx)(d.a,{}),Object(a.jsx)(G.a,{color:"primary",variant:"contained",className:e.root,disabled:!C(),onClick:function(){return N(t,m,!0)},children:"Save"}),Object(a.jsx)(G.a,{color:"secondary",variant:"contained",className:e.root,disabled:!C(),onClick:function(){return N(t,JSON.parse(JSON.stringify(g)))},children:"Discard"})]})]}):Object(a.jsx)(Ke.a,{})}var tt=Object(k.a)((function(e){return{root:{margin:e.spacing(1),minWidth:120}}}));function nt(){var e=tt(),t=Object(r.useState)(null),n=Object(s.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(!1),j=Object(s.a)(i,2),b=j[0],d=j[1];function p(){return(p=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,Ce(c);case 3:d(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){var t=e.target.name.split("."),n=Object(s.a)(t,2),a=n[0],r=n[1];o(Object(l.a)(Object(l.a)({},c),{},Object(u.a)({},a,Object(l.a)(Object(l.a)({},c[a]),{},Object(u.a)({},r,e.target.value)))))}return Object(r.useEffect)((function(){function e(){return(e=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(null),e.t0=o,e.next=4,ye();case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c?Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(W.a,{label:"SSID",className:e.root,name:"wifi.ssid",value:c.wifi?c.wifi.ssid:"",onChange:f}),Object(a.jsx)(W.a,{label:"Key",className:e.root,name:"wifi.key",value:c.wifi?c.wifi.key:"",onChange:f})]}),Object(a.jsx)(G.a,{variant:"contained",color:"primary",className:e.root,onClick:function(){return p.apply(this,arguments)},disabled:b,children:"Save"})]}):Object(a.jsx)(Ke.a,{})}var at=Object(k.a)((function(e){return{root:{margin:e.spacing(1),minWidth:120}}}));function rt(){var e=at(),t=Object(r.useState)(-1),n=Object(s.a)(t,2),c=n[0],o=n[1];function i(){return(i=Object(R.a)(D.a.mark((function e(){var t,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(0),e.next=3,Be(o);case 3:t=e.sent,(n=document.createElement("a")).setAttribute("href","data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t,null,2)))),n.setAttribute("download","TocataConfig.json"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),o(-1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(0),e.next=3,ze(o);case 3:o(-1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(R.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(0),e.next=3,Ye(o);case 3:o(-1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)("div",{children:[Object(a.jsxs)(L.a,{container:!0,direction:"column",alignItems:"flex-start",children:[Object(a.jsx)(G.a,{color:"primary",variant:"contained",className:e.root,onClick:function(){return i.apply(this,arguments)},disabled:c>=0,children:"Backup"}),Object(a.jsx)("input",{accept:"application/JSON",id:"restore-file",type:"file",onChange:function(e){var t=e.target.files;if(t.length<=0)return!1;var n=new FileReader;n.onload=function(){var e=Object(R.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=JSON.parse(t.target.result)){e.next=4;break}return alert("Invalid configuration"),e.abrupt("return",!1);case 4:return o(0),e.next=7,Ue(n,o);case 7:o(-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.readAsText(t.item(0))},hidden:!0}),Object(a.jsx)("label",{htmlFor:"restore-file",children:Object(a.jsx)(G.a,{color:"secondary",variant:"contained",component:"span",disabled:c>=0,className:e.root,children:"Restore"})}),Object(a.jsx)(G.a,{color:"primary",variant:"contained",className:e.root,onClick:function(){return l.apply(this,arguments)},disabled:c>=0,children:"Reset"}),Object(a.jsx)(G.a,{color:"secondary",variant:"contained",className:e.root,onClick:function(){return u.apply(this,arguments)},disabled:c>=0,children:"Restart"})]}),Object(a.jsx)("div",{children:c>=0&&Object(a.jsx)(Ke.a,{variant:"determinate",value:c})})]})}function ct(){return Object(a.jsx)(C.a,{children:"Coming soon..."})}var ot=n(166),it=n(90),st=n(181);function lt(){var e=Object(ot.a)("(prefers-color-scheme: dark)"),t=Object(r.useMemo)((function(){return Object(it.a)({palette:{type:e?"dark":"light"}})}),[e]),n=[{path:"/programs",name:"Programs",title:"Programs",content:et},{path:"/config",name:"Configuration",title:"System configuration",content:nt},{path:"/backup",name:"Backup",title:"Backup / Restore",content:rt},{path:"/firmware",name:"Firmware",title:"Firmware update",content:ct}];return Object(a.jsxs)(st.a,{theme:t,children:[Object(a.jsx)(b.a,{}),Object(a.jsx)(F,{navigation:n})]})}var ut=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,188)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};i.a.render(Object(a.jsx)(lt,{}),document.getElementById("root")),ut()}},[[114,1,2]]]);